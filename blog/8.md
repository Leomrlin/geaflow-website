---
title: GitHub上有哪些好项目？TuGraph-Analytics图计算快速上手之SSSP算法
date: 2023-07-21
---

## <font style="color:rgb(69, 69, 69);">引言</font>

<font style="color:rgb(69, 69, 69);">下面这张图是 GitHub 中约 500 个开源项目仓库与话题组成的关系网络，密布的连线恐怕没有人能从中找到任何有用的信息。然而 GitHub 目前总共有 3000000+的仓库！</font>

<!-- truncate -->

![](https://intranetproxy.alipay.com/skylark/lark/0/2025/png/96961/1755591806655-d5e22d15-81ca-4104-bd60-aa7f786760f6.png)

<font style="color:rgb(69, 69, 69);">如何在 5 分钟内发现有哪些我们感兴趣好项目？</font>

<font style="color:rgb(69, 69, 69);">今天我们使用 GeaFlow 帮助我们实现 SSSP(单源最短路径算法)，来试一试盲人摸象！</font>

<font style="color:rgb(69, 69, 69);">GeaFlow(品牌名 TuGraph-Analytics)是蚂蚁集团开源的分布式实时图计算引擎，目前广泛应用于金融风控、社交网络、知识图谱以及数据应用等场景。</font>

## <font style="color:rgb(69, 69, 69);">SSSP(单源最短路径算法)算法介绍</font>

<font style="color:rgb(69, 69, 69);">SSSP 单源最短路径算法（Single Source Shortest Path）是一种基于图论的算法，用于寻找一个起点到其他所有节点的最短路径。该算法可以应用于多种实际问题，如地图导航、网络拓扑等。</font>

<font style="color:rgb(69, 69, 69);">在 GitHub 开源项目仓库与话题组成的关系网络中，从仓库到话题再到仓库的关系边可以支持 SSSP 算法的运行。</font>

![](https://intranetproxy.alipay.com/skylark/lark/0/2025/png/96961/1755591759812-c2b7fa2a-01d3-4562-8b09-c77808435cc2.png)

<font style="color:rgb(69, 69, 69);">如图，在关系网络局部，从起点出发，通过箭头的个数可以标记话题/仓库到源点的距离。例如仓库 FiraCode 与仓库 Font-Awesome 的距离为 2，通过 2 个箭头可到达，它们也是互相距离最近的关联仓库。</font>

<font style="color:rgb(69, 69, 69);">简单来说，标记出我们感兴趣的仓库，那些与我们感兴趣仓库距离最近的仓库就是推荐的好仓库。或者更进一步，STAR 数更多的近距离仓库更值得推荐。</font>

## <font style="color:rgb(69, 69, 69);">GeaFlow 实现 SSSP</font>

<font style="color:rgb(69, 69, 69);">要运行 SSSP 算法，我们可以指定使用的图，直接在图查询里调用图算法，语法形式如下：</font>

```plain
USE GRAPH github_repo_topic
INSERT INTO tbl_result
CALL sssp('source_vertex') YIELD (repoName, distance)
RETURN repoName, distance;
```

<font style="color:rgb(69, 69, 69);">这段代码在图 github_repo_topic 上运行，将 source_vertex 作为算法起点，输出所有其他点的距离。如果无需这么多结果，可以在 RETURN 中加上 WHERE 条件过滤，一切和 SQL 语句一样！</font>

<font style="color:rgb(69, 69, 69);">如果需要定制一个图算法，我们可以实现 AlgorithmUserFunction 接口。GeaFlow 内置了多种图算法的通用实现，这些算法无需单独定制，例如 SSSP 算法的参考实现如下：</font>

```plain
@Description(name = "sssp", description = "built-in udga Single Source Shortest Path")
public class SSSP implements AlgorithmUserFunction<Object, Long> {

    private AlgorithmRuntimeContext<Object, Long> context;

    @Override
    public void init(AlgorithmRuntimeContext<Object, Long> context, Object[] parameters) {
        //初始化算法上下文
        this.context = context;
    }

    @Override
    public void process(RowVertex vertex, Iterator<Long> messages) {
        long currentDistance;
        //初始化所有点距离初始值
        if (context.getCurrentIterationId() == 1L) {
            //初始化所有点距离初始值
        } else if (context.getCurrentIterationId() <= $maxIteration) {
            //计算最短距离
        } else {
            //返回结果
        }
        //更新距离值
        context.updateVertexValue(ObjectRow.create($currentDistance));
        //向邻居发送消息
        context.sendMessage(vertex.getId(), $currentDistance);
        long scatterDistance = $currentDistance == Long.MAX_VALUE ? Long.MAX_VALUE : currentDistance + 1;
        for (RowEdge edge : context.loadEdges(EdgeDirection.OUT)) {
            context.sendMessage(edge.getTargetId(), scatterDistance);
        }
    }

    @Override
    public StructType getOutputType() {
        //算法返回值数据类型
        return new StructType(
            new TableField("id", StringType.INSTANCE, false),
            new TableField("distance", LongType.INSTANCE, false)
        );
    }
}
```

<font style="color:rgb(69, 69, 69);">图查询以提交作业的形式完成，作业可以运行在本地或 K8S 集群中，GeaFlow 提供控制台管理和回溯这些图研发作业。</font>

![](https://intranetproxy.alipay.com/skylark/lark/0/2025/png/96961/1755591761309-851b2211-a9bf-4ca0-bfc0-b781e12ad5ad.png)

## <font style="color:rgb(69, 69, 69);">在 GitHub 关系图上盲人摸象</font>

<font style="color:rgb(69, 69, 69);">话不多说，我们找到 GitHub 上目前星星数最多的项目，计算与它距离为 2（即具有共同话题）的项目都有哪些？</font>

<font style="color:rgb(69, 69, 69);">目前星星最多的项目是 freeCodeCamp，这里数据</font>[<font style="color:rgb(255, 81, 0);">GitHub Public Repository Metadata</font>](https://www.kaggle.com/datasets/pelmers/github-repository-metadata-with-5-stars)<font style="color:rgb(69, 69, 69);">截止 2023 年 5 月。</font>

```plain
USE GRAPH github_repo_topic
INSERT INTO tbl_result
SELECT repoName, distance FROM (
    CALL sssp('freeCodeCamp') YIELD (repoName, distance)
    RETURN repoName, distance
) WHERE distance = 2
LIMIT 10
;
```

<font style="color:rgb(69, 69, 69);">短短时间我们就拿到了计算结果，来看看 GeaFlow 都给我淘到了哪些好项目吧。这里不按星星数排序，随机呈现 10 条记录。</font>

```plain
id,stars,forks
papers-we-love,72164,5162
system-design-primer,220197,39109
free-programming-books-zh_CN,102417,27516
33-js-concepts,56077,7850
build-your-own-x,201052,19629
30-seconds-of-code,111510,11483
carbon,32588,1854
freecodecamp.cn,36459,1369
Web-Dev-For-Beginners,69680,10904
free-programming-books,279431,55158
```

## <font style="color:rgb(69, 69, 69);">总结</font>

<font style="color:rgb(69, 69, 69);">本文介绍了实时图计算引擎 GeaFlow 支持图算法 SSSP 的基本原理以及在 GeaFlow 中的实现细节，并展示其在 GitHub 数据集上的一个应用。</font>

<font style="color:rgb(69, 69, 69);">GeaFlow(品牌名 TuGraph-Analytics) 已正式开源，欢迎大家关注！！！</font>

<font style="color:rgb(69, 69, 69);">欢迎给我们 Star 哦!</font>

<font style="color:rgb(69, 69, 69);">Welcome to give us a Star!</font>

<font style="color:rgb(69, 69, 69);">GitHub</font><font style="color:rgb(69, 69, 69);">👉</font>[<font style="color:rgb(255, 81, 0);">https://github.com/TuGraph-family/tugraph-analytics</font>](https://github.com/TuGraph-family/tugraph-analytics)

## <font style="color:rgb(69, 69, 69);">微信群</font>

![](https://intranetproxy.alipay.com/skylark/lark/0/2025/png/96961/1755591744911-4383871d-f60b-4fb4-8ee1-435a8ed702d0.png)

<font style="color:rgb(69, 69, 69);">请点击项目链接下方微信二维码添加微信用户群：</font>[<font style="color:rgb(255, 81, 0);">https://github.com/TuGraph-family/tugraph-analytics</font>](https://github.com/TuGraph-family/tugraph-analytics)
